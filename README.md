# Unity 数据持久化完全指南  

本仓库包含了关于Unity数据持久化的完整指南，从简单的PlayerPrefs到更复杂的SQLite数据库操作，为开发者提供了全面的解决方案和示例代码。  

## 内容概述  

 ## 1.PlayerPrefs: 轻量级键值存储
 **保存和加载玩家分数、用户名和音量设置示例**

#### 实现功能

- 输入玩家昵称、当前分数、滑动条控制当前音量。
- 点击Save按钮，保存当前分数和当前音量。
- 点击Load按钮，加载上次存储的分数和音量设置。
- 点击Reset按钮，重置当前界面的用户信息和设置。
  

## 2.文件存储: 灵活保存数据

使用C#的文件IO操作,可以将任意数据类型保存到设备的文件系统中。这种方式灵活性很高,但需要开发者自行处理数据的序列化和反序列化。将数据保存到设备本地文件系统中的方式,通常会将数据序列化为某种格式(如JSON、XML或二进制格式)后写入文件。

**保存和加载玩家数据示例**

### 实现功能

- 保存和加载一个`PlayerData`类的实例,包括玩家名称、分数、等级、解锁道具和游戏进度等数据。
- 使用`BinaryFormatter`进行二进制序列化,提高序列化和反序列化的性能。
- 自动加载之前保存的数据,并在游戏退出时自动保存当前数据。
- 通过UI按钮和输入框,允许用户查看和修改玩家数据。
- 提供"Save"、"Load"、"Delete"和"Open Folder"按钮,分别用于保存、加载、清空数据和打开持久化数据文件所在的文件夹。
- 实现了基本的版本控制,可以检测数据版本是否与当前版本匹配。

## 3.JSON序列化: 交换结构化数据

JSON是一种轻量级的数据交换格式,具有可读性好、跨平台性强等优点。Unity提供了JsonUtility类简化了对象和JSON的相互转换。

将游戏数据存储在本地文件系统中,通常使用JSON二进制格式。在Unity中,可以使用`Application.persistentDataPath`获取应用程序的持久化数据路径,然后读写文件。

### **保存和加载游戏设置示例**

### 实现功能

实现了完整的游戏设置功能,包括保存、加载和应用设置。它使用了JSON序列化来存储设置数据,并通过Unity的UI组件让玩家方便地修改设置。当设置发生变化时,会自动保存到磁盘文件,下次启动游戏时会自动读取并应用这些设置。

## 4.XML序列化: 适用于复杂数据结构

XML格式天生支持表示层次化的数据结构,可以很好地处理自定义类型、集合等复杂对象。在Unity中,我们可以使用System.Xml命名空间提供的类进行XML序列化和反序列化操作。XML 序列化是一种常用的数据持久化方法之一，它可以将对象的状态转换为 XML 格式，然后保存到文件中。Unity 中使用 XML 序列化通常需要结合 .NET 中提供的 `System.Xml.Serialization` 命名空间。
<img width="693" alt="XML" src="https://github.com/Charlielyo/Unity-Data-Persistence-Demo/assets/78399982/3b9ad85f-90ca-495d-998a-86cb4f215391">

## 5.SQLite: 强大的关系型数据库

对于需要存储大量数据、进行复杂查询的项目,使用关系型数据库如SQLite会是不错的选择。SQLite是一个开源的嵌入式关系数据库,无需单独的服务器进程,可直接集成在应用中使用。
![image-20240417171734876](https://github.com/Charlielyo/Unity-Data-Persistence-Demo/assets/78399982/ce79189f-8aae-4234-9be7-fa409ef1331e)

- **其他数据持久化方法**：未来可能会包含关于SQLite等其他数据持久化方法的详细指南。  
  
## 如何使用  

1. 克隆或下载本仓库。  
2. 查看项目文件以获取详细的指南和示例代码。
3. 根据指南中的步骤和示例代码，将数据持久化功能集成到您的Unity项目中。  

## 贡献  

如果您有任何建议或改进，欢迎提交issue或pull request。  

## 许可  

本仓库的内容遵循MIT许可协议。
